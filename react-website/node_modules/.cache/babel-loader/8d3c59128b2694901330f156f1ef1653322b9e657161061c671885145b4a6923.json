{"ast":null,"code":"var _jsxFileName = \"H:\\\\Website\\\\Website_Technical_Store\\\\react-website\\\\src\\\\Components\\\\Cart\\\\Cart.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Cart() {\n  _s();\n  const [cartItems, setCartItems] = useState([]);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const user = JSON.parse(localStorage.getItem(\"user\"));\n    if (!(user !== null && user !== void 0 && user.userId)) return;\n    fetch(`http://localhost:5085/api/cart/${user.userId}`).then(res => res.json()).then(data => {\n      const items = Array.isArray(data.items) ? data.items : [];\n      setCartItems(items);\n    }).catch(err => console.error(\"Ошибка загрузки корзины\", err));\n  }, []);\n  const calculateTotal = () => {\n    return cartItems.reduce((sum, item) => sum + item.quantity * item.product.newPrice, 0);\n  };\n  const handleCheckout = () => {\n    const validCartItems = cartItems.filter(item => Number.isInteger(item.productId) && item.quantity > 0);\n    if (validCartItems.length === 0) {\n      alert(\"Корзина пуста или содержит некорректные товары\");\n      return;\n    }\n    navigate(\"/checkout\", {\n      state: {\n        cartItems: validCartItems,\n        total: calculateTotal()\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: cartItems.map(item => {\n        var _item$product, _item$product2;\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [(_item$product = item.product) === null || _item$product === void 0 ? void 0 : _item$product.model, \" \\u2014 \", item.quantity, \" \\u0448\\u0442. \\xD7 \", (_item$product2 = item.product) === null || _item$product2 === void 0 ? void 0 : _item$product2.newPrice, \" \\u0440\\u0443\\u0431.\"]\n        }, item.productId, true, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\u0418\\u0442\\u043E\\u0433\\u043E: \", calculateTotal(), \" \\u0440\\u0443\\u0431.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleCheckout,\n      children: \"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n}\n_s(Cart, \"X1Cg+yrFJT2G/h4BSNE9/5vv8jY=\", false, function () {\n  return [useNavigate];\n});\n_c = Cart;\nvar _c;\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsxDEV","_jsxDEV","Cart","_s","cartItems","setCartItems","navigate","user","JSON","parse","localStorage","getItem","userId","fetch","then","res","json","data","items","Array","isArray","catch","err","console","error","calculateTotal","reduce","sum","item","quantity","product","newPrice","handleCheckout","validCartItems","filter","Number","isInteger","productId","length","alert","state","total","children","fileName","_jsxFileName","lineNumber","columnNumber","map","_item$product","_item$product2","model","onClick","_c","$RefreshReg$"],"sources":["H:/Website/Website_Technical_Store/react-website/src/Components/Cart/Cart.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function Cart() {\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    if (!user?.userId) return;\r\n\r\n    fetch(`http://localhost:5085/api/cart/${user.userId}`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        const items = Array.isArray(data.items) ? data.items : [];\r\n        setCartItems(items);\r\n      })\r\n      .catch(err => console.error(\"Ошибка загрузки корзины\", err));\r\n  }, []);\r\n\r\n  const calculateTotal = () => {\r\n    return cartItems.reduce((sum, item) => sum + item.quantity * item.product.newPrice, 0);\r\n  };\r\n\r\n  const handleCheckout = () => {\r\n    const validCartItems = cartItems.filter(item =>\r\n      Number.isInteger(item.productId) && item.quantity > 0\r\n    );\r\n\r\n    if (validCartItems.length === 0) {\r\n      alert(\"Корзина пуста или содержит некорректные товары\");\r\n      return;\r\n    }\r\n\r\n    navigate(\"/checkout\", {\r\n      state: { cartItems: validCartItems, total: calculateTotal() }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Корзина</h2>\r\n      <ul>\r\n        {cartItems.map(item => (\r\n          <li key={item.productId}>\r\n            {item.product?.model} — {item.quantity} шт. × {item.product?.newPrice} руб.\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <p>Итого: {calculateTotal()} руб.</p>\r\n      <button onClick={handleCheckout}>Оформить заказ</button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}